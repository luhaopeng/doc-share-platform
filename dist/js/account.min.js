"use strict";function _objectSpread(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{},a=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.forEach(function(t){_defineProperty(n,t,e[t])})}return n}function _defineProperty(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}!function(){var a={icon:"success",position:"bottom-right",allowToastClose:!1,stack:!1,loader:!1,hideAfter:2e3,textAlign:"center"};function t(a){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=$("".concat(a," tbody")),n=0;n<5;n++)o.append(d(a));var e=$(".result ".concat(a," + nav .limit select"));for(var c in e.on("change",function(t){var n=parseInt(t.target.value);o.html("");for(var e=0;e<n;e++)o.append(d(a))}),t)"function"==typeof t[c]&&o.on("click","button[data-action=".concat(c,"]"),t[c])}function d(t){return/user/i.test(t)?(a=_objectSpread({id:parseInt(100*Math.random()),account:s(["admin","张腾","小张","张工"]),company:s(["国网电力科学研究院","华立科技股份有限公司","威盛集团有限公司","江苏林洋能源有限公司"]),date:s(["2019-05-09","2019-05-08","2019-05-07"]),banned:s([!0,!1])},s([{sys:!0,type:"平台管理员",role:"系统管理员"},{sys:!1,type:"企业用户",role:"企业用户"}])),o={ban:{toggle:"ban",color:"danger",title:"限制登录",icon:"not_interested"},recover:{toggle:"recover",color:"success",title:"恢复登录",icon:"replay"}}[a.banned?"recover":"ban"],c=o.toggle,d=o.color,i=o.title,l=o.icon,r='\n      <td class="td-actions">\n        <button\n          data-action="ban"\n          data-toggle="'.concat(c,'"\n          type="button"\n          class="btn btn-').concat(d,'"\n          title="').concat(i,'"\n        >\n          <i class="material-icons">').concat(l,'</i>\n        </button>\n        <button\n          data-action="edit"\n          type="button"\n          class="btn btn-info"\n          title="修改角色"\n        >\n          <i class="material-icons">edit</i>\n        </button>\n      </td>\n    '),"\n      <tr data-id=".concat(a.id,">\n        <td>").concat(a.account,"</td>\n        <td>").concat(a.company,"</td>\n        <td>").concat(a.date,'</td>\n        <td class="').concat(a.banned?"text-warning":"",'">\n          ').concat(a.banned?"登录受限":"正常","\n        </td>\n        <td>").concat(a.type,"</td>\n        <td>").concat(a.role,"</td>\n        ").concat(a.sys?"<td>---</td>":r,"\n      </tr>\n    ")):/role/i.test(t)?(e=_objectSpread({},s([{name:"系统管理员",rank:"系统管理员",desc:"系统自定义",sys:!0},{name:"企业用户",rank:"平台用户",desc:"普通用户",sys:!1},{name:"华立企业管理员",rank:"企业管理员",desc:"企业管理员",sys:!1}]),{creator:"admin",time:s(["2019-04-23 17:15:25","2019-04-22 15:27:36","2019-05-01 09:30:44"])}),"\n      <tr>\n        <td>".concat(e.name,"</td>\n        <td>").concat(e.rank,"</td>\n        <td>").concat(e.desc,"</td>\n        <td>").concat(e.creator,"</td>\n        <td>").concat(e.time,"</td>\n        ").concat(e.sys?"<td>---</td>":'\n      <td class="td-actions">\n        <button\n          data-action="edit"\n          type="button"\n          class="btn btn-info"\n          title="修改"\n        >\n          <i class="material-icons">edit</i>\n        </button>\n        <button\n          data-action="delete"\n          type="button"\n          class="btn btn-danger"\n          title="删除"\n        >\n          <i class="material-icons">delete</i>\n        </button>\n      </td>\n    ',"\n      </tr>\n    ")):/bonus/i.test(t)?(n=_objectSpread({account:s(["admin","张腾","小张","张工"]),time:s(["2019-05-21 15:47:12","2019-05-21 12:30:13","2019-05-21 08:19:53"]),company:s(["华立科技股份有限公司","威盛集团有限公司","江苏林洋能源有限公司","深圳市科陆电子科技股份有限公司"])},s([{type:"文件上传",bonus:2,operand:"+"},{type:"文件被收藏",bonus:1,operand:"+"},{type:"下载文件",bonus:5,operand:"-"},{type:"文件入库",bonus:1,operand:"+"},{type:"评论文件",bonus:1,operand:"+"}]),{total:parseInt(200*Math.random())}),"\n      <tr>\n        <td>".concat(n.time,"</td>\n        <td>").concat(n.account,"</td>\n        <td>").concat(n.company,"</td>\n        <td>").concat(n.type,"</td>\n        <td>").concat(n.operand," ").concat(n.bonus,"</td>\n        <td>").concat(n.total,"</td>\n      </tr>\n    ")):void 0;var n,e,a,o,c,d,i,l,r}function s(t){return t[Math.random()*t.length|0]}$(function(){var e;$("#changeRoleModal .submit").on("click",function(){$("#changeRoleModal").modal("hide")}),$("#editRoleModal .submit").on("click",function(){$("#editRoleModal").modal("hide")}),$("#deleteRoleModal .submit").on("click",function(){$("#deleteRoleModal").modal("hide")}),$("#roles .search .add").on("click",function(){var t=$("#editRoleModal");t.find(".modal-title").text("新增角色"),t.find("input#name").val(""),t.find("select#rank").get(0).selectedIndex=0,t.find("input#desc").val(""),t.find(".form-check-input").prop("checked",!1),t.modal()}),e=$("#editRoleModal .authority"),[{name:"admin",label:"首页"},{name:"origin",label:"原始文件库"},{name:"parsed",label:"解析文件库"},{name:"account",label:"账号管理"}].map(function(t){return e.append('\n      <div class="form-check col-md-4">\n        <label class="form-check-label">\n          <input\n            class="form-check-input"\n            type="checkbox"\n            name="'.concat((n=t).name,'"\n          />\n          ').concat(n.label,'\n          <span class="form-check-sign">\n            <span class="check"></span>\n          </span>\n        </label>\n      </div>\n    '));var n}),$("#searchCompany").autocomplete({lookup:["华立科技股份有限公司","威盛集团有限公司","江苏林洋能源有限公司","深圳市科陆电子科技股份有限公司"]}),t("#table_user",{ban:function(){var t=$(this),n=t.attr("data-toggle");"ban"===n?(t.attr({"data-toggle":"recover",title:"恢复登录"}).addClass("btn-success").removeClass("btn-danger").children(".material-icons").text("replay"),$.toast(_objectSpread({heading:"已禁止该账号登录"},a))):"recover"===n&&(t.attr({"data-toggle":"ban",title:"限制登录"}).addClass("btn-danger").removeClass("btn-success").children(".material-icons").text("not_interested"),$.toast(_objectSpread({heading:"已恢复"},a)))},edit:function(){$("#changeRoleModal").modal()}}),t("#table_role",{edit:function(){var t=$("#editRoleModal");t.find(".modal-title").text("修改角色"),t.find("input#name").val("企业用户"),t.find("select#rank").val("usr"),t.find("input#desc").val("普通用户"),t.modal(),t.find(".form-check-input").prop("checked",!1),t.find("input[name=origin], input[name=parsed]").prop("checked",!0),t.modal()},delete:function(){$("#deleteRoleModal").modal()}}),t("#table_bonus")})}();