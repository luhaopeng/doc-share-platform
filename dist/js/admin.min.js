"use strict";!function(){var n={format:"YYYY/MM/DD",separator:" - ",applyLabel:"应用",cancelLabel:"取消",fromLabel:"从",toLabel:"至",customRangeLabel:"自定义",weekLabel:"星期",daysOfWeek:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],firstDay:1};function i(t){for(var a=[];0<t--;)a.push(parseInt(15*Math.random()+1));return a}$(function(){var t,a,e;$("#switch_line").bootstrapSwitch({onText:"下载",offText:"上传",onColor:"info",offColor:"info",state:!0,size:"small"}),$("#switch_bar_1").bootstrapSwitch({onText:"下载量",offText:"上传量",onColor:"info",offColor:"info",state:!0,size:"small"}),$(".card .card-footer .stats").html('\n      <i class="material-icons">access_time</i>\n      统计时间：'.concat(moment().format("YYYY-MM-DD HH:mm:ss"),"\n    ")),$.post("main/queryBaseData",function(t){handleResult(t,function(t){var a=t.totalFile,n=t.totalDownload,e=t.totalEnterprise,o=t.totalCustomer,s=t.typeList,r=t.brandList,i=t.otherList;$("#docCount").html("".concat(a," <small>份</small>")),$("#saveCount").html("".concat(n," <small>次</small>")),$("#entCount").html("".concat(e," <small>家</small>")),$("#userCount").html("".concat(o," <small>人</small>")),function(t){var a=[],n=0,e=t.map(function(t){return a.push(t.name),n+=parseInt(t.typeNum),{meta:t.name,value:t.typeNum}});new Chartist.Pie("#chart_pie_1",{series:e},{height:"200px",labelOffset:15,showLabel:!1,plugins:[Chartist.plugins.legend({legendNames:a}),Chartist.plugins.tooltip({tooltipOffset:{x:14,y:-10}})]});var o="";t.map(function(t){o+="\n        ".concat(t.name,"\n        <span>\n          ").concat(parseInt(t.typeNum)/n*100|0,"%\n        </span>\n      ")}),$(".card p.chart-pie-1").html(o)}(s),function(t,a){var n=[],e=0,o=t.map(function(t){return n.push(t.name),e+=parseInt(t.typeNum),{meta:t.name,value:t.typeNum}});new Chartist.Pie("#chart_pie_2",{series:o},{height:"200px",labelOffset:15,showLabel:!1,plugins:[Chartist.plugins.legend({legendNames:n}),Chartist.plugins.tooltip({tooltipOffset:{x:14,y:-10}})]});var s,r,i="";t.map(function(t){"其他"!==t.name?i+="\n          ".concat(t.name,"\n          <span>\n            ").concat(parseInt(t.typeNum)/e*100|0,"%\n          </span>\n        "):(s=t.name,r=t.typeNum)});var l=$(".card p.chart-pie-2");if(l.html(i),a instanceof Array){var c='\n        <a\n          class="other"\n          tabindex="0"\n          title="其他"\n          data-trigger="hover"\n        >\n          '.concat(s,"\n          <span>\n            ").concat(parseInt(r)/e*100|0,"%\n          </span>\n        </a>\n      ");l.append(c);var m="";a.map(function(t){e+=t.typeNum}),a.map(function(t){m+="\n          ".concat(t.name,"\n          ").concat(parseInt(t.typeNum)/e*100|0,"%\n          <br />\n        ")}),l.find(".other").popover({html:!0,content:m})}}(r,i)})}),function(){var e={labels:["01","02","03","04","05","06","07"],series:[i(7)]},o={labels:["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30"],series:[i(30)]},s=new Chartist.Line("#chart_line",e,{plugins:[Chartist.plugins.ctPointLabels()]}),r=moment().startOf("month"),t=moment().endOf("month");function a(t,a){var n="YYYY/MM/DD";$("#range_line span").html(t.format(n)+" - "+a.format(n)),r.isSame(t)?s.update(e):s.update(o)}$("#range_line").daterangepicker({startDate:r,endDate:t,opens:"center",maxSpan:{days:31},locale:n,ranges:{"最近7天":[moment().subtract(6,"days"),moment()],"最近15天":[moment().subtract(14,"days"),moment()],"最近30天":[moment().subtract(29,"days"),moment()],"当月":[moment().startOf("month"),moment().endOf("month")],"上月":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]}},a),a(r,t)}(),t={labels:["01","02","03","04","05","06","07","08","09","10","11","12"],series:[i(12),i(5).concat([0,0,0,0,0,0,0])]},new Chartist.Bar("#chart_bar_1",t,{seriesBarDistance:10,plugins:[Chartist.plugins.legend({legendNames:["2018","2019"]}),Chartist.plugins.tooltip({tooltipOffset:{x:14,y:-10}})]}),$("#switch_bar_option_1").bootstrapSwitch({onText:"按年",offText:"按月",onColor:"info",offColor:"info",state:!0,size:"mini"}),a={labels:["01","02","03","04","05","06","07","08","09","10","11","12"],series:[i(5).concat([0,0,0,0,0,0,0]),i(5).concat([0,0,0,0,0,0,0])]},new Chartist.Bar("#chart_bar_2",a,{seriesBarDistance:10,plugins:[Chartist.plugins.legend({legendNames:["华立科技","威盛电子"]}),Chartist.plugins.tooltip({tooltipOffset:{x:14,y:-10}})]}),$("#switch_bar_option_2").bootstrapSwitch({onText:"按年",offText:"按月",onColor:"info",offColor:"info",state:!0,size:"mini"}),$("#btn_bar_option_2").on("click",function(){$("#optionModal").modal()}),$("#optionModal .submit").on("click",function(){$("#optionModal").modal("hide")}),(e=$("#table_rank a[data-rank]")).on("click",function(){var t=$(this),a=t.attr("data-rank");if("none"===a)e.attr("data-rank","none").children("i").removeClass("rank-desc").removeClass("rank-asc"),t.attr("data-rank","desc").children("i").addClass("rank-desc");else{var n="desc"===a?"asc":"desc";t.attr("data-rank",n).children("i").removeClass("rank-"+a).addClass("rank-"+n)}})})}();