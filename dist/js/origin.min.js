"use strict";function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),n.forEach(function(t){_defineProperty(e,t,a[t])})}return e}function _defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}!function(){function r(t,e){var a;switch(t){case"brand":a="品牌";break;case"type":a="设备类型";break;default:a=""}var n=e;return 7<n.length&&(n=n.substr(0,7)+"..."),'\n      <a\n        class="factor"\n        title="'.concat(e,'"\n        data-cat="').concat(t,'"\n      >\n        <b>').concat(a,"：</b>\n        <em>").concat(n,'</em>\n        <i class="material-icons">close</i>\n      </a>\n    ')}function o(t,a){$.post("fileData/queryFileData",t,function(t){handleResult(t,function(t){a.html(""),t.list.map(function(t){var e;a.append((e={id:t.fileDataId,title:t.fileName,date:t.dataTimeDesc,size:t.fileSize+"MB",type:t.fileDataTypeDesc,cate:t.classTwoDesc,brand:t.brandDesc,company:t.enterprise,state:t.fileDataStatusDesc,download:t.downloadCount,fav:!1},'\n      <tr data-id="'.concat(e.id,'">\n        <td\n          class="text-left"\n          title="').concat(e.title,'"\n        >\n          <div class="text-ellipsis">').concat(e.title,"</div>\n        </td>\n        <td>").concat(e.date,"</td>\n        <td>").concat(e.size,"</td>\n        <td>").concat(e.type,"</td>\n        <td>").concat(e.cate,"</td>\n        <td>").concat(e.brand,'</td>\n        <td title="').concat(e.company,'">').concat(e.company.substr(0,4),"</td>\n        <td>").concat(e.state,'</td>\n        <td class="text-right">').concat(e.download,'</td>\n        <td class="td-actions text-right">\n          <button\n            data-action="star"\n            data-toggle="').concat(e.fav?"unstar":"star",'"\n            type="button"\n            class="btn btn-warning"\n            title="').concat(e.fav?"取消":"",'收藏"\n          >\n            <i class="material-icons">star').concat(e.fav?"":"_border",'</i>\n          </button>\n          <button\n            data-action="download"\n            type="button"\n            class="btn btn-success"\n            title="下载"\n          >\n            <i class="material-icons">get_app</i>\n          </button>\n        </td>\n      </tr>\n    ')))}),function(t){var e=$("#table_origin").siblings("nav").find("ul.pagination");e.find("li.page-item:not(.prev):not(.next)").remove();var a=e.find(".page-item.next"),n=t.pages,i=t.pageNum;if(n<=10)for(var r=1;r<=n;++r)$(o(r,i)).insertBefore(a);else i<=3?($(o(1,i)).insertBefore(a),$(o(2,i)).insertBefore(a),$(o(3,i)).insertBefore(a),$(o("...",i)).insertBefore(a)):n-2<=i?($(o(1,i)).insertBefore(a),$(o("...",i)).insertBefore(a),$(o(n-2,i)).insertBefore(a),$(o(n-1,i)).insertBefore(a)):($(o(1,i)).insertBefore(a),$(o("...",i)).insertBefore(a),$(o(i-1,i)).insertBefore(a),$(o(i,i)).insertBefore(a),$(o(i+1,i)).insertBefore(a),$(o("...",i)).insertBefore(a)),$(o(n,i)).insertBefore(a);function o(t,e){return'\n        <li class="page-item '.concat(e===t?"active":""," ").concat("..."===t?"else":"",'">\n          <a class="page-link">').concat(t,"</a>\n        </li>\n      ")}}({pageNum:t.pageNum,total:t.total,pages:t.pages})})})}$(function(){var t,a;t=$(".filter .combine"),a=$(".filter .condition"),t.on("click",".factor",function(){var t=$(this),e=t.attr("data-cat");a.children(".row[data-cat=".concat(e,"]")).show(),t.remove()}).on("click",".reset",function(){a.children(".row[data-cat]").show(),t.children(".factor").remove()}),a.on("click",".row:not(.multi) .value a",function(){var t=$(this),e=t.closest(".row[data-cat]"),a=e.attr("data-cat"),n=t.text();$(r(a,n)).insertBefore(".filter .combine .reset"),e.hide()}).on("click",".row.multi .value li",function(){var t=$(this);t.closest("li").toggleClass("active")}).on("click",".extra .multi",function(){var t=$(this);t.closest(".row[data-cat]").addClass("multi")}).on("click",".extra .submit",function(){var t=$(this),e=t.closest(".row.multi[data-cat]"),a=e.find(".value li.active"),n=e.attr("data-cat"),i="";a.text(function(t,e){i+=(t?",":"")+e}),i&&($(r(n,i)).insertBefore(".filter .combine .reset"),e.hide()),e.removeClass("multi"),a.removeClass("active")}).on("click",".extra .cancel",function(){var t=$(this),e=t.closest(".row.multi[data-cat]"),a=e.find(".value li.active");e.removeClass("multi"),a.removeClass("active")}),function(){var n={pageNum:1,pageSize:5,fileDataType:1,sortType:1,keyWord:"",classOne:"",classTwo:"",brand:""},t=$("#table_origin"),i=t.find("tbody");o(n,i);var a=t.find("a[data-rank]");a.on("click",function(){var t=$(this),e=t.attr("data-rank");"none"===e&&(a.attr("data-rank","none").children("i").removeClass("rank-desc").removeClass("rank-asc"),t.attr("data-rank","desc").children("i").addClass("rank-desc"),n.sortType=t.attr("data-type"),o(n,i))});var e=t.siblings("nav");e.find(".limit select").on("change",function(t){n.pageSize=parseInt(t.target.value),o(n,i)});var r=e.find("ul.pagination");r.on("click",".page-item",function(){var t=parseInt(r.find(".page-item:not(.prev):not(.next)").last().text()),e=$(this),a=n.pageNum;e.hasClass("prev")?n.pageNum=n.pageNum-1||1:e.hasClass("next")?n.pageNum=(n.pageNum+1)%(t+1)||t:e.hasClass("else")||(n.pageNum=parseInt(e.text())||1),a!==n.pageNum&&o(n,i)}),t.siblings(".search").on("change",".search-box",function(){n.keyWord=$(this).val().trim()}).on("click",".search-btn",function(){o(n,i)}).on("keydown",".search-box",function(t){13==t.keyCode&&(n.keyWord=$(this).val().trim(),o(n,i))}),i.on("click","tr",function(t){var e=t.target.tagName;if(/tr|td/i.test(e)){var a=$(this).closest("tr").attr("data-id"),n=$('\n          <form\n            action="fileData/fileDataDetail"\n            method="post"\n            target="_blank"\n            rel="noopener noreferrer"\n            style="display:none"\n          >\n            <input name="fileDataId" value="'.concat(a,'" />\n            <input name="fileDataType" value="1" />\n          </form>\n        '));$(document.body).append(n),n.submit().remove()}}),i.on("click","button[data-action=star]",function(){var t=$(this),e=t.attr("data-toggle"),a={icon:"success",position:"bottom-right",allowToastClose:!1,stack:!1,loader:!1,hideAfter:2e3,textAlign:"center"};"star"===e?(t.attr({"data-toggle":"unstar",title:"取消收藏"}).children(".material-icons").text("star"),$.toast(_objectSpread({heading:"收藏成功"},a))):"unstar"===e&&(t.attr({"data-toggle":"star",title:"收藏"}).children(".material-icons").text("star_border"),$.toast(_objectSpread({heading:"已取消收藏"},a)))})}()})}();