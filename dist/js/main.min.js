"use strict";$(function(){$(".card .card-footer .stats").html('\n      <i class="material-icons">access_time</i>\n      统计时间：'.concat(moment().format("YYYY-MM-DD HH:mm:ss"),"\n    ")),$.post("account/queryAccountInfo",function(t){handleResult(t,function(t){var n=t.account,e=t.enterprise,a=t.integral,i=t.uploadFileCount,o=t.beDownloadFileCount,s=t.favoritesFileCount,c=$(".card.user"),r=c.find(".card-header h4");r.text(n+" / "+e);var l=c.find(".stats p");l.eq(0).text(i),l.eq(1).text(o),l.eq(2).text(s),l.eq(3).text(a)})}),$.post("main/queryBaseData",function(t){handleResult(t,function(t){var n=t.typeList,e=t.brandList,a=t.otherList;!function(t){var n=[],e=0,a=t.map(function(t){return n.push(t.name),e+=parseInt(t.typeNum,10),{meta:t.name,value:t.typeNum}});new Chartist.Pie("#chart_pie_1",{series:a},{height:"200px",labelOffset:15,showLabel:!1,plugins:[Chartist.plugins.legend({legendNames:n}),Chartist.plugins.tooltip({tooltipOffset:{x:14,y:-10}})]});var i="";t.map(function(t){i+="\n        ".concat(t.name,"\n        <span>\n          ").concat((parseInt(t.typeNum,10)/e*100).toFixed(),"%\n        </span>\n      ")}),$(".card p.chart-pie-1").html(i)}(n),function(t,n){var e=[],a=0,i=t.map(function(t){return e.push(t.name),a+=parseInt(t.typeNum,10),{meta:t.name,value:t.typeNum}});new Chartist.Pie("#chart_pie_2",{series:i},{height:"200px",labelOffset:15,showLabel:!1,plugins:[Chartist.plugins.legend({legendNames:e}),Chartist.plugins.tooltip({tooltipOffset:{x:14,y:-10}})]});var o,s,c="";t.map(function(t){"其他"!==t.name?c+="\n          ".concat(t.name,"\n          <span>\n            ").concat((parseInt(t.typeNum,10)/a*100).toFixed(),"%\n          </span>\n        "):(o=t.name,s=t.typeNum)});var r=$(".card p.chart-pie-2");if(r.html(c),n.length){var l='\n        <a\n          class="other"\n          tabindex="0"\n          title="其他"\n          data-trigger="hover"\n        >\n          '.concat(o,"\n          <span>\n            ").concat((parseInt(s,10)/a*100).toFixed(),"%\n          </span>\n        </a>\n      ");r.append(l);var p="";n.map(function(t){p+="\n          ".concat(t.name,"\n          ").concat((parseInt(t.typeNum,10)/a*100).toFixed(),"%\n          <br />\n        ")}),r.find(".other").popover({html:!0,content:p})}}(e,a)})}),function(){var n={circleType:1},t=$("#table_rank"),e=t.find("tbody"),a=t.closest(".card").find("ul.nav-tabs");function i(t){$.post("main/queryFileDownloadTop5",t,function(t){handleResult(t,function(t){e.html(""),e.html("");var n=e.closest("table");n.siblings(".empty").remove(),0===t.length?$('<div class="empty">暂无数据</div>').insertAfter(n):t.map(function(t){e.append("\n                <tr data-id=".concat(t.fileDataId,'>\n                  <td class="text-left">').concat(t.fileName,"</td>\n                  <td>").concat(t.enterprise,"</td>\n                  <td>").concat(t.classTwoDesc,"</td>\n                  <td>").concat(t.brandDesc,"</td>\n                  <td>").concat(t.dataTimeDesc,"</td>\n                  <td>").concat(t.downloadCount,"</td>\n                </tr>\n              "))})})})}a.on("click",".nav-link",function(){var t=$(this);t.hasClass("active")||(a.find(".nav-link").removeClass("active"),t.addClass("active"),n.circleType=parseInt(t.attr("data-type"),10),i(n))}),e.on("click","tr",function(t){var n=t.target.tagName;if(/tr|td|div/i.test(n)){var e=$(this).closest("tr"),a=e.attr("data-id"),i=$('\n          <form\n            action="fileData/fileDataDetail"\n            method="post"\n            target="_blank"\n            rel="noopener noreferrer"\n            style="display:none;"\n          >\n            <input name="fileDataId" value="'.concat(a,'" />\n          </form>\n        '));$(document.body).append(i),i.submit().remove()}}),i(n)}()});