"use strict";function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(e){_defineProperty(t,e,n[e])})}return t}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}$(function(){var e;e=1===fileType?"base":"analysis",$('nav.navbar .navbar-nav .nav-link[href*="'.concat(e,'"]')).parent().addClass("active").siblings().removeClass("active"),$("nav ol.breadcrumb li.breadcrumb-item").eq(0).html('\n      <a href="fileData/'.concat(2===fileType?"analysis":"base",'FileData">\n        ').concat(2===fileType?"解析":"原始","文件库\n      </a>\n    ")),$(".card .star").on("click",function(){var e=$(this),t=e.attr("data-toggle"),n={icon:"success",position:"bottom-right",allowToastClose:!1,stack:!1,loader:!1,hideAfter:2e3,textAlign:"center"};"star"===t?(e.attr({"data-toggle":"unstar",title:"取消收藏"}).children(".material-icons").text("star"),$.toast(_objectSpread({heading:"收藏成功"},n))):"unstar"===t&&(e.attr({"data-toggle":"star",title:"收藏"}).children(".material-icons").text("star_border"),$.toast(_objectSpread({heading:"已取消收藏"},n)))}),2===fileType&&($(".card ul.author .download").on("click",function(){$("#downloadModal").modal()}),$("#downloadModal #downloadBtn").on("click",function(){$("#downloadModal").modal("hide")})),$.post("fileData/queryFileDataDetail",{fileDataId:fileId,fileDataType:fileType},function(e){handleResult(e,function(e){var t=e.fileDataTypeDesc,n=e.account,a=e.enterprise,i=e.fileName,r=e.fileSize,o=e.dataTimeDesc,c=e.downloadCount,l=e.favoriteStatus,s=e.requiredIntegral,d=e.remark,f=e.classOneDesc,u=e.classTwoDesc,p=e.brandDesc,m=e.model,g=e.standard,v=e.pattern,b=e.ratedV,h=e.ratedI,x=e.ratedP,y=e.equipmentBrand,q=e.equipmentModel,B=e.samplingRate,D=e.variableRatio,w=e.unitV,T=e.unitI,N=$(".card:first-of-type"),k=N.find(".card-body");N.find(".star").attr({title:1===l?"取消收藏":"收藏","data-toggle":1===l?"unstar":"star"}).children("i").text(1===l?"star":"star_border"),k.find(".card-title").text(i),k.find(".intro").text(d);var I="<li>需 ".concat(s," 积分</li>");k.find(".author").html("\n              <li>".concat(n,"</li>\n              <li>").concat(a,"</li>\n              <li>").concat(o,"</li>\n              <li>").concat(t,"</li>\n              <li>").concat(c," 次下载</li>\n              ").concat(0<parseInt(s)?I:"",'\n              <li title="下载" class="download">\n                <i class="material-icons">get_app</i>\n                ').concat(r," MB\n              </li>\n            "));var O=k.find(".stat .part"),j=O.eq(0).find(".row .row div:last-child");j.eq(0).text("".concat(f,"/").concat(u)),j.eq(1).text(p),j.eq(2).text(m),j.eq(3).text(g),j.eq(4).text(v),j.eq(5).text("".concat(b,"/").concat(h)),j.eq(6).text(x);var C=O.eq(1).find(".row .row div:last-child");C.eq(0).text(y),C.eq(1).text(q),C.eq(2).text(B),C.eq(3).text(D),C.eq(4).text(w),C.eq(5).text(T)})}),function(){var a={fileDataId:fileId,fileDataType:fileType,pageNum:1,pageSize:10},e=$(".card"),r=e.find(".comment-list"),c=r.find("ul.comment"),t=e.find(".publish"),n=t.find("textarea");t.find("button.send").on("click",function(){var e={user:"张腾",time:moment().format("YYYY-MM-DD HH:mm:ss"),content:n.val().trim()};c.prepend(l(e)),n.val("")});var i=r.find("ul.pagination");function o(e){$.post("account/queryComments",e,function(e){handleResult(e,function(e){var t=e.pageNum,n=e.total,a=e.pages,i=e.list;r.find(".card-title").text("评论（".concat(i.length,"）")),i.map(function(e){c.append(l({user:e.account,time:e.commentTimeDes,content:e.content}))}),function(e){var t=c.siblings("nav").find("ul.pagination");t.find("li.page-item:not(.prev):not(.next)").remove();var n=t.find(".page-item.next"),a=e.pages,i=e.pageNum;if(a<=10)for(var r=1;r<=a;++r)$(o(r,i)).insertBefore(n);else i<=3?($(o(1,i)).insertBefore(n),$(o(2,i)).insertBefore(n),$(o(3,i)).insertBefore(n),$(o("...",i)).insertBefore(n)):a-2<=i?($(o(1,i)).insertBefore(n),$(o("...",i)).insertBefore(n),$(o(a-2,i)).insertBefore(n),$(o(a-1,i)).insertBefore(n)):($(o(1,i)).insertBefore(n),$(o("...",i)).insertBefore(n),$(o(i-1,i)).insertBefore(n),$(o(i,i)).insertBefore(n),$(o(i+1,i)).insertBefore(n),$(o("...",i)).insertBefore(n)),$(o(a,i)).insertBefore(n);function o(e,t){return'\n          <li class="page-item '.concat(t===e?"active":""," ").concat("..."===e?"else":"",'">\n            <a class="page-link">').concat(e,"</a>\n          </li>\n        ")}}({pageNum:t,total:n,pages:a})})})}function l(e){return'\n        <li class="row">\n          <div class="icon">\n            <i class="material-icons">face</i>\n          </div>\n          <div class="col">\n            <h4>'.concat(e.user,"</h4>\n            <span>").concat(e.time,"</span>\n            <p>").concat(e.content,"</p>\n          </div>\n        </li>\n      ")}i.on("click",".page-item",function(){var e=parseInt(i.find(".page-item:not(.prev):not(.next)").last().text()),t=$(this),n=a.pageNum;t.hasClass("prev")?a.pageNum=a.pageNum-1||1:t.hasClass("next")?a.pageNum=(a.pageNum+1)%(e+1)||e:t.hasClass("else")||(a.pageNum=parseInt(t.text())||1),n!==a.pageNum&&o(a)}),o(a)}()});